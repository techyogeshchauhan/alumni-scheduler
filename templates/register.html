{% extends "base.html" %}
{% block title %}Register - Alumni Event Scheduler{% endblock %}
{% block content %}
<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full space-y-8">
        <!-- Enhanced Header -->
        <div class="text-center">
            <div class="mx-auto h-16 w-16 bg-gradient-to-r from-green-600 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg">
                <i class="fas fa-user-plus text-white text-2xl"></i>
            </div>
            <h2 class="mt-6 text-3xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent">
                Join Our Alumni Community
            </h2>
            <p class="mt-2 text-sm text-gray-600">
                Create your account and start connecting with fellow alumni
            </p>
        </div>

        <!-- Enhanced Registration Form -->
        <div class="card-enhanced p-8 space-y-6">
            <form method="POST" class="space-y-6" id="registerForm">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                <!-- Full Name Field -->
                <div class="space-y-2">
                    <label for="name" class="block text-sm font-semibold text-gray-700">
                        <i class="fas fa-user mr-2 text-green-500"></i>Full Name
                    </label>
                    <input type="text" 
                           name="name" 
                           id="name" 
                           class="input-modern w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300"
                           placeholder="Enter your full name"
                           required
                           autocomplete="name">
                    <div id="name-error" class="text-red-500 text-sm hidden"></div>
                </div>

                <!-- Email Field -->
                <div class="space-y-2">
                    <label for="email" class="block text-sm font-semibold text-gray-700">
                        <i class="fas fa-envelope mr-2 text-green-500"></i>Email Address
                    </label>
                    <input type="email" 
                           name="email" 
                           id="email" 
                           class="input-modern w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300"
                           placeholder="Enter your email address"
                           required
                           autocomplete="email">
                    <div id="email-error" class="text-red-500 text-sm hidden"></div>
                </div>

                <!-- Phone Field -->
                <div class="space-y-2">
                    <label for="phone" class="block text-sm font-semibold text-gray-700">
                        <i class="fas fa-phone mr-2 text-green-500"></i>Phone Number
                        <span class="text-gray-400 font-normal">(Optional)</span>
                    </label>
                    <input type="tel" 
                           name="phone" 
                           id="phone" 
                           class="input-modern w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300"
                           placeholder="Enter your phone number"
                           autocomplete="tel">
                    <div id="phone-error" class="text-red-500 text-sm hidden"></div>
                </div>

                <!-- Graduation Year Field -->
                <div class="space-y-2">
                    <label for="grad_year" class="block text-sm font-semibold text-gray-700">
                        <i class="fas fa-graduation-cap mr-2 text-green-500"></i>Graduation Year
                    </label>
                    <select name="grad_year" 
                            id="grad_year" 
                            class="input-modern w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300"
                            required>
                        <option value="">Select your graduation year</option>
                        {% for year in range(2024, 1950, -1) %}
                        <option value="{{ year }}">{{ year }}</option>
                        {% endfor %}
                    </select>
                    <div id="grad_year-error" class="text-red-500 text-sm hidden"></div>
                </div>

                <!-- Password Field -->
                <div class="space-y-2">
                    <label for="password" class="block text-sm font-semibold text-gray-700">
                        <i class="fas fa-lock mr-2 text-green-500"></i>Password
                    </label>
                    <div class="relative">
                        <input type="password" 
                               name="password" 
                               id="password" 
                               class="input-modern w-full px-4 py-3 pr-12 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300"
                               placeholder="Create a strong password"
                               required
                               autocomplete="new-password">
                        <button type="button" 
                                onclick="togglePassword('password')" 
                                class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors">
                            <i class="fas fa-eye" id="passwordToggle"></i>
                        </button>
                    </div>
                    <!-- Password Strength Indicator -->
                    <div class="mt-2">
                        <div class="flex space-x-1">
                            <div id="strength-1" class="h-1 w-full bg-gray-200 rounded-full transition-colors duration-300"></div>
                            <div id="strength-2" class="h-1 w-full bg-gray-200 rounded-full transition-colors duration-300"></div>
                            <div id="strength-3" class="h-1 w-full bg-gray-200 rounded-full transition-colors duration-300"></div>
                            <div id="strength-4" class="h-1 w-full bg-gray-200 rounded-full transition-colors duration-300"></div>
                        </div>
                        <p id="strength-text" class="text-xs text-gray-500 mt-1">Password strength</p>
                    </div>
                    <div id="password-error" class="text-red-500 text-sm hidden"></div>
                </div>

                <!-- Confirm Password Field -->
                <div class="space-y-2">
                    <label for="confirm_password" class="block text-sm font-semibold text-gray-700">
                        <i class="fas fa-lock mr-2 text-green-500"></i>Confirm Password
                    </label>
                    <div class="relative">
                        <input type="password" 
                               name="confirm_password" 
                               id="confirm_password" 
                               class="input-modern w-full px-4 py-3 pr-12 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300"
                               placeholder="Confirm your password"
                               required
                               autocomplete="new-password">
                        <button type="button" 
                                onclick="togglePassword('confirm_password')" 
                                class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors">
                            <i class="fas fa-eye" id="confirmPasswordToggle"></i>
                        </button>
                    </div>
                    <div id="confirm_password-error" class="text-red-500 text-sm hidden"></div>
                </div>

                <!-- Terms and Conditions -->
                <div class="flex items-start">
                    <div class="flex items-center h-5">
                        <input id="terms" 
                               name="terms" 
                               type="checkbox" 
                               class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"
                               required>
                    </div>
                    <div class="ml-3 text-sm">
                        <label for="terms" class="text-gray-700">
                            I agree to the 
                            <a href="#" class="text-green-600 hover:text-green-500 font-medium">Terms of Service</a> 
                            and 
                            <a href="#" class="text-green-600 hover:text-green-500 font-medium">Privacy Policy</a>
                        </label>
                    </div>
                </div>

                <!-- Submit Button -->
                <button type="submit" 
                        class="w-full btn-primary py-3 px-4 rounded-xl font-semibold text-white bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-300 transform hover:scale-105 hover:shadow-lg">
                    <i class="fas fa-user-plus mr-2"></i>
                    <span id="submitText">Create Account</span>
                    <i class="fas fa-spinner fa-spin ml-2 hidden" id="submitSpinner"></i>
                </button>
            </form>

            <!-- Divider -->
            <div class="relative">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-gray-300"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-2 bg-white text-gray-500">Or continue with</span>
                </div>
            </div>

            <!-- Social Registration Buttons -->
            <div class="grid grid-cols-2 gap-3">
                <button type="button" 
                        class="w-full inline-flex justify-center py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-all duration-300 hover:scale-105">
                    <i class="fab fa-google text-red-500 mr-2"></i>
                    Google
                </button>
                <button type="button" 
                        class="w-full inline-flex justify-center py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-all duration-300 hover:scale-105">
                    <i class="fab fa-linkedin text-blue-600 mr-2"></i>
                    LinkedIn
                </button>
            </div>

            <!-- Sign In Link -->
            <div class="text-center">
                <p class="text-sm text-gray-600">
                    Already have an account? 
                    <a href="{{ url_for('login') }}" 
                       class="font-semibold text-green-600 hover:text-green-500 transition-colors">
                        Sign in here
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>

<script>
// Enhanced form validation and interactions
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('registerForm');
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const phoneInput = document.getElementById('phone');
    const gradYearInput = document.getElementById('grad_year');
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirm_password');
    const submitBtn = form.querySelector('button[type="submit"]');
    const submitText = document.getElementById('submitText');
    const submitSpinner = document.getElementById('submitSpinner');

    // Real-time name validation
    nameInput.addEventListener('input', function() {
        const name = this.value;
        const nameError = document.getElementById('name-error');
        
        if (name && name.length < 2) {
            nameError.textContent = 'Name must be at least 2 characters';
            nameError.classList.remove('hidden');
            this.classList.add('border-red-500');
        } else {
            nameError.classList.add('hidden');
            this.classList.remove('border-red-500');
        }
    });

    // Real-time email validation
    emailInput.addEventListener('input', function() {
        const email = this.value;
        const emailError = document.getElementById('email-error');
        
        if (email && !isValidEmail(email)) {
            emailError.textContent = 'Please enter a valid email address';
            emailError.classList.remove('hidden');
            this.classList.add('border-red-500');
        } else {
            emailError.classList.add('hidden');
            this.classList.remove('border-red-500');
        }
    });

    // Real-time phone validation
    phoneInput.addEventListener('input', function() {
        const phone = this.value;
        const phoneError = document.getElementById('phone-error');
        
        if (phone && !isValidPhone(phone)) {
            phoneError.textContent = 'Please enter a valid phone number';
            phoneError.classList.remove('hidden');
            this.classList.add('border-red-500');
        } else {
            phoneError.classList.add('hidden');
            this.classList.remove('border-red-500');
        }
    });

    // Real-time password validation and strength indicator
    passwordInput.addEventListener('input', function() {
        const password = this.value;
        const passwordError = document.getElementById('password-error');
        
        if (password && password.length < 8) {
            passwordError.textContent = 'Password must be at least 8 characters';
            passwordError.classList.remove('hidden');
            this.classList.add('border-red-500');
        } else {
            passwordError.classList.add('hidden');
            this.classList.remove('border-red-500');
        }
        
        updatePasswordStrength(password);
    });

    // Real-time confirm password validation
    confirmPasswordInput.addEventListener('input', function() {
        const password = passwordInput.value;
        const confirmPassword = this.value;
        const confirmPasswordError = document.getElementById('confirm_password-error');
        
        if (confirmPassword && password !== confirmPassword) {
            confirmPasswordError.textContent = 'Passwords do not match';
            confirmPasswordError.classList.remove('hidden');
            this.classList.add('border-red-500');
        } else {
            confirmPasswordError.classList.add('hidden');
            this.classList.remove('border-red-500');
        }
    });

    // Form submission with loading state
    form.addEventListener('submit', function(e) {
        const name = nameInput.value;
        const email = emailInput.value;
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;
        
        if (!name || !email || !password || !confirmPassword) {
            e.preventDefault();
            return;
        }
        
        if (!isValidEmail(email)) {
            e.preventDefault();
            emailInput.focus();
            return;
        }
        
        if (password !== confirmPassword) {
            e.preventDefault();
            confirmPasswordInput.focus();
            return;
        }
        
        // Show loading state
        submitBtn.disabled = true;
        submitText.textContent = 'Creating account...';
        submitSpinner.classList.remove('hidden');
    });

    // Email validation function
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    // Phone validation function
    function isValidPhone(phone) {
        const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
        return phoneRegex.test(phone.replace(/[\s\-\(\)]/g, ''));
    }

    // Password strength indicator
    function updatePasswordStrength(password) {
        const strengthBars = ['strength-1', 'strength-2', 'strength-3', 'strength-4'];
        const strengthText = document.getElementById('strength-text');
        let strength = 0;
        let strengthLabel = '';

        if (password.length >= 8) strength++;
        if (/[a-z]/.test(password)) strength++;
        if (/[A-Z]/.test(password)) strength++;
        if (/[0-9]/.test(password)) strength++;
        if (/[^A-Za-z0-9]/.test(password)) strength++;

        // Reset all bars
        strengthBars.forEach(bar => {
            document.getElementById(bar).className = 'h-1 w-full bg-gray-200 rounded-full transition-colors duration-300';
        });

        // Color bars based on strength
        for (let i = 0; i < Math.min(strength, 4); i++) {
            const bar = document.getElementById(strengthBars[i]);
            if (strength <= 2) {
                bar.className = 'h-1 w-full bg-red-500 rounded-full transition-colors duration-300';
                strengthLabel = 'Weak';
            } else if (strength === 3) {
                bar.className = 'h-1 w-full bg-yellow-500 rounded-full transition-colors duration-300';
                strengthLabel = 'Medium';
            } else {
                bar.className = 'h-1 w-full bg-green-500 rounded-full transition-colors duration-300';
                strengthLabel = 'Strong';
            }
        }

        strengthText.textContent = password ? `Password strength: ${strengthLabel}` : 'Password strength';
    }
});

// Password visibility toggle
function togglePassword(fieldId) {
    const passwordInput = document.getElementById(fieldId);
    const passwordToggle = document.getElementById(fieldId === 'password' ? 'passwordToggle' : 'confirmPasswordToggle');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        passwordToggle.classList.remove('fa-eye');
        passwordToggle.classList.add('fa-eye-slash');
    } else {
        passwordInput.type = 'password';
        passwordToggle.classList.remove('fa-eye-slash');
        passwordToggle.classList.add('fa-eye');
    }
}

// Add floating label effect
document.querySelectorAll('.input-modern').forEach(input => {
    input.addEventListener('focus', function() {
        this.parentElement.classList.add('focused');
    });
    
    input.addEventListener('blur', function() {
        if (!this.value) {
            this.parentElement.classList.remove('focused');
        }
    });
});
</script>
{% endblock %}