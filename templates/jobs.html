{% extends "base.html" %}
{% block title %}Job Board - Alumni Event Scheduler{% endblock %}
{% block content %}
<div class="min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header Section -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-4">
                Alumni Job Board
            </h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-6">
                Discover career opportunities shared by fellow alumni and post your own job openings.
            </p>
            
            <!-- Post Job Button -->
            <a href="{{ url_for('post_job') }}" 
               class="btn-primary px-8 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-300 transform hover:scale-105 hover:shadow-lg">
                <i class="fas fa-plus mr-2"></i>Post a Job
            </a>
        </div>

        <!-- Search and Filter Section -->
        <div class="card-enhanced p-6 mb-8">
            <form method="GET" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Search Input -->
                    <div class="md:col-span-2">
                        <label for="query" class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-search mr-2 text-green-500"></i>Search Jobs
                        </label>
                        <input type="text" 
                               name="query" 
                               id="query"
                               value="{{ search_query }}"
                               placeholder="Search by title, company, or description..."
                               class="input-modern w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent">
                    </div>

                    <!-- Job Type Filter -->
                    <div>
                        <label for="type" class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-briefcase mr-2 text-green-500"></i>Job Type
                        </label>
                        <select name="type" 
                                id="type"
                                class="input-modern w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">All Types</option>
                            {% for job_type in job_types %}
                            <option value="{{ job_type }}" {% if job_type_filter == job_type %}selected{% endif %}>{{ job_type }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <!-- Search Button -->
                <div class="flex justify-center">
                    <button type="submit" 
                            class="btn-primary px-8 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-300 transform hover:scale-105 hover:shadow-lg">
                        <i class="fas fa-search mr-2"></i>Search Jobs
                    </button>
                </div>
            </form>
        </div>

        <!-- Results Header -->
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">
                Available Positions
                <span class="text-lg font-normal text-gray-500">({{ jobs|length }} found)</span>
            </h2>
        </div>

        <!-- Jobs List -->
        <div class="space-y-6">
            {% for job in jobs %}
            <div class="card-modern p-6 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                    <!-- Job Info -->
                    <div class="flex-1">
                        <div class="flex items-start space-x-4">
                            <!-- Company Logo Placeholder -->
                            <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center text-white text-xl font-bold flex-shrink-0">
                                {{ job.company[0].upper() }}
                            </div>
                            
                            <!-- Job Details -->
                            <div class="flex-1">
                                <h3 class="text-xl font-bold text-gray-800 mb-2">
                                    <a href="{{ url_for('job_detail', job_id=job._id) }}" 
                                       class="hover:text-green-600 transition-colors">
                                        {{ job.title }}
                                    </a>
                                </h3>
                                
                                <div class="flex flex-wrap items-center gap-4 mb-3">
                                    <div class="flex items-center text-gray-600">
                                        <i class="fas fa-building mr-2 text-green-500"></i>
                                        <span class="font-medium">{{ job.company }}</span>
                                    </div>
                                    
                                    <div class="flex items-center text-gray-600">
                                        <i class="fas fa-map-marker-alt mr-2 text-green-500"></i>
                                        <span>{{ job.location }}</span>
                                    </div>
                                    
                                    <div class="flex items-center text-gray-600">
                                        <i class="fas fa-clock mr-2 text-green-500"></i>
                                        <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">
                                            {{ job.job_type }}
                                        </span>
                                    </div>
                                </div>
                                
                                <!-- Job Description Preview -->
                                <p class="text-gray-700 mb-4 line-clamp-3">
                                    {{ job.description[:200] }}{% if job.description|length > 200 %}...{% endif %}
                                </p>
                                
                                <!-- Posted Info -->
                                <div class="flex items-center text-sm text-gray-500">
                                    <i class="fas fa-user mr-2"></i>
                                    <span>Posted by {{ job.posted_by_name }}</span>
                                    <span class="mx-2">â€¢</span>
                                    <i class="fas fa-calendar mr-2"></i>
                                    <span>{{ job.created_at.strftime('%B %d, %Y') }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="mt-4 lg:mt-0 lg:ml-6 flex flex-col space-y-2">
                        <a href="{{ url_for('job_detail', job_id=job._id) }}" 
                           class="btn-primary px-6 py-2 rounded-lg font-medium text-center transition-all duration-300 hover:scale-105">
                            <i class="fas fa-eye mr-2"></i>View Details
                        </a>
                        
                        {% if job.apply_url %}
                        <a href="{{ job.apply_url }}" 
                           target="_blank"
                           class="btn-secondary px-6 py-2 rounded-lg font-medium text-center transition-all duration-300 hover:scale-105">
                            <i class="fas fa-external-link-alt mr-2"></i>Apply Now
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- No Results -->
        {% if not jobs %}
        <div class="text-center py-12">
            <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-briefcase text-gray-400 text-3xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-gray-600 mb-2">No jobs found</h3>
            <p class="text-gray-500 mb-4">Try adjusting your search criteria or be the first to post a job!</p>
            <div class="space-x-4">
                <a href="{{ url_for('jobs') }}" 
                   class="btn-secondary px-6 py-2 rounded-lg font-medium">
                    <i class="fas fa-refresh mr-2"></i>Clear Filters
                </a>
                <a href="{{ url_for('post_job') }}" 
                   class="btn-primary px-6 py-2 rounded-lg font-medium">
                    <i class="fas fa-plus mr-2"></i>Post a Job
                </a>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<style>
.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
</style>
{% endblock %}
